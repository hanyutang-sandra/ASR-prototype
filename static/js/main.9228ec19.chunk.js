(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{221:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),o=a.n(s),i=a(19),c=a(20),l=a(23),p=a(21),m=a(24),u=a(15),d=a(90),h=a.n(d),g=a(91),f=a.n(g),b=a(18),E=a.n(b),v=a(29),O=a.n(v),x=a(87),j=a.n(x),k=a(51),y=a.n(k),w=a(35),S=a.n(w),C=a(89),N=a.n(C),T=Object(u.createMuiTheme)({palette:{primary:{light:y.a[100],main:y.a[300],dark:y.a[600]},secondary:{light:S.a[100],main:S.a[300],dark:S.a[500]}},typography:{useNextVariants:!0}});var P=function(e){return function(t){return r.a.createElement(u.MuiThemeProvider,{theme:T},r.a.createElement(N.a,null),r.a.createElement(e,t))}},D=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(h.a,{className:e.headbar},r.a.createElement(f.a,{variant:"dense"},r.a.createElement(O.a,{className:e.menuButton},r.a.createElement("img",{src:j.a,alt:"logo",className:e.img})),r.a.createElement(E.a,{className:e.header},"ASR (Assessment Assistance)"))))}}]),t}(r.a.Component),R=P(Object(u.withStyles)(function(e){return{root:{flexGrow:1},headbar:{backgroundColor:e.palette.primary.light,position:"fixed",height:50},menuButton:{marginLeft:-18,marginRight:10},img:{width:60,height:30},header:{variant:"h6"}}})(D)),U=a(46),A=a(5),I=a.n(A),L=a(47),B=a.n(L),F=a(48),J=a.n(F),G=a(49),H=a.n(G),M=a(50),W=a.n(M),_=a(16),q=a.n(_),z=a(92),K=a.n(z),V=a(62),$=a.n(V),Q=a(22),X="START_APP",Y="UPLOADING",Z="UPLOADED",ee="SEEK_URI",te="GET_RESULT",ae=function(){return{type:Y}},ne=function(){return{type:Z}},re=a(31),se=a.n(re),oe=a(30),ie={progress:"startApp"};var ce=Object(oe.b)({changeProgress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;switch((arguments.length>1?arguments[1]:void 0).type){case X:return Object.assign({},{progress:"startApp"});case Y:return Object.assign({},{progress:"uploading"});case Z:return Object.assign({},{progress:"uploaded"});case ee:return Object.assign({},{progress:"seekUri"});case te:return Object.assign({},{progress:"getResult"});default:return e}}}),le=Object(oe.c)(ce);le.subscribe(function(){return console.log(le.getState())});var pe=le;var me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a.handleCancel=function(){document.getElementById("file").value=""},a.handleSubmit=function(e){e.preventDefault(),pe.dispatch(ae());var t=new FormData;t.append("file",a.state.selectedFile),fetch("https://protected-plains-55400.herokuapp.com/upload",{method:"POST",mode:"cors",cache:"no-cache",body:t}).then(function(e){return document.getElementById("file").value="",e.json()}).then(function(e){a.props.passData(e.name),pe.dispatch(ne())}).catch(function(e){alert("Something is wrong"),window.location.reload()})},a.onChangeHandler=function(e){a.setState({selectedFile:e.target.files[0]})},a.state={expanded:!0,selectedFile:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props.classes;return r.a.createElement(B.a,{className:t.root},r.a.createElement(J.a,{classes:{title:t.title},title:"1. Upload audio files",action:r.a.createElement(O.a,{className:I()(t.expand,Object(U.a)({},t.expandOpen,this.state.expanded)),onClick:this.handleExpandClick,"aria-expanded":this.state.expanded},r.a.createElement(H.a,null))}),r.a.createElement(W.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},r.a.createElement("form",{className:t.form,onSubmit:this.handleSubmit},r.a.createElement(q.a,{container:!0,spacing:0},r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(K.a,{id:"file",type:"file",variant:"outlined",onChange:this.onChangeHandler,required:!0},"Browse"))),r.a.createElement(q.a,{container:!0,spacing:0,className:t.submit},r.a.createElement(q.a,{item:!0,xs:6},r.a.createElement($.a,{variant:"outlined",className:t.cancel,onClick:this.handleCancel},"Cancel")),r.a.createElement(q.a,{item:!0,xs:6},r.a.createElement($.a,{type:"submit",variant:"contained",className:t.submitbtn},"Submit")),r.a.createElement("br",null),r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(E.a,{style:{marginTop:"1rem"}},"uploading"===(e=this.props.progress)?"File uploading":"uploaded"===e||"seekUri"===e?"File uploaded success. Start transcription":""))))))}}]),t}(r.a.Component),ue=P(se()(Object(u.withStyles)(function(e){return{root:{margin:"2rem",marginTop:"5rem",padding:"1rem"},title:{color:e.palette.primary.dark},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},form:{marginLeft:"2rem",width:"50%"},text:{width:"80%",marginLeft:"-2rem"},submit:{marginTop:"2rem"},cancel:{width:"10rem"},submitbtn:{width:"10rem",backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark}}}},{name:"UploadCard"}),Object(Q.b)(function(e){return{progress:e.changeProgress.progress}}))(me)),de=a(2),he=a.n(de),ge=a(93),fe=a.n(ge),be=a(94),Ee=a.n(be),ve=a(95),Oe=a.n(ve),xe=a(63),je=a.n(xe),ke=a(96),ye=a.n(ke);function we(e,t){return e<=.6&&null!==e?t.incorrect:t.correct}var Se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a.resultSec=r.a.createRef(),a.state={expanded:!1,name:a.props.name,uri:null,result:null,processData:a.props.data,complete:!1,interval:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if("uploaded"===this.props.progress){var e=this.props.name,t=this;this.interval=setInterval(function(){var a=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;fetch("https://protected-plains-55400.herokuapp.com/seekresult",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n})}).then(function(e){return e.json()}).then(function(e){console.log(e.data),r.setState({processData:e}),"COMPLETED"===e.data.TranscriptionJob.TranscriptionJobStatus&&(clearInterval(a.interval),r.setState({complete:!0}),console.log("Complete"),pe.dispatch({type:ee}))}).catch(function(e){console.log(e),clearInterval(a.interval)})},3e4)}}},{key:"render",value:function(){var e=this,t=this.props.classes;return!0===this.state.complete&&clearInterval(this.interval),"seekUri"===this.props.progress&&fetch(this.state.processData.data.TranscriptionJob.Transcript.TranscriptFileUri,{method:"GET",mode:"cors",cache:"no-cache"}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({result:t.results,expanded:!0}),pe.dispatch({type:te})}).catch(function(e){console.log(e),alert("Something is wrong")}),r.a.createElement(B.a,{className:t.root},r.a.createElement(J.a,{classes:{title:t.title},title:"2. See transcripts",action:r.a.createElement(O.a,{disabled:!1,className:I()(t.expand,Object(U.a)({},t.expandOpen,this.state.expanded)),onClick:this.handleExpandClick,"aria-expanded":this.state.expanded},r.a.createElement(H.a,null))}),r.a.createElement(W.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},r.a.createElement(fe.a,null,"getResult"===this.props.progress?r.a.createElement(Ee.a,null,r.a.createElement(Oe.a,null,r.a.createElement(q.a,{container:!0,spacing:8},r.a.createElement(q.a,{item:!0,xs:3},r.a.createElement(je.a,null,r.a.createElement(E.a,{className:t.speaker},"Speaker 1:"))),r.a.createElement(q.a,{item:!0,xs:9,className:t.transcript},r.a.createElement(je.a,{ref:this.resultSec},this.state.result.items.map(function(e,a){return r.a.createElement("span",{key:a},e.alternatives[0].confidence<=.6&&null!==e.alternatives[0].confidence?r.a.createElement(ye.a,{title:"Confidence: "+e.alternatives[0].confidence,placement:"bottom"},r.a.createElement("span",{className:we(e.alternatives[0].confidence,t)},e.alternatives[0].content)):r.a.createElement("span",{className:we(e.alternatives[0].confidence,t)},e.alternatives[0].content),r.a.createElement("span",null,"\xa0"))})))))):null)))}}]),t}(r.a.Component);Se.protoTypes={classes:he.a.object.isRequired};var Ce=P(se()(Object(u.withStyles)(function(e){return{root:{margin:"2rem",marginTop:"3rem",padding:"1rem"},title:{color:e.palette.primary.dark},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},speaker:{color:e.palette.primary.dark,fontSize:16,fontWeight:500},incorrect:{display:"inline-block",backgroundColor:"#b3e5fc",lineHeight:"1.5rem","&:hover":{border:"2px solid #01579b",cursor:"pointer"}},correct:{display:"inline-block",backgroundColor:"#ffffff",lineHeight:"1.5rem"}}},{name:"ResultCard"}),Object(Q.b)(function(e){return{progress:e.changeProgress.progress}}))(Se)),Ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).handlePassData=function(e){a.setState({name:e}),console.log(a.state.name)},a.state={name:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(R,null),r.a.createElement(ue,{className:e.uploadcard,passData:this.handlePassData}),"uploaded"===this.props.progress||"seekUri"===this.props.progress||"getResult"===this.props.progress?r.a.createElement(Ce,{className:e.resultcard,name:this.state.name}):null)}}]),t}(r.a.Component),Te=P(se()(Object(u.withStyles)(function(e){return{root:{flexGrow:1,backgroundColor:e.palette.secondary.light,height:"100vh",width:"100vw"},uploadcard:{marginTop:"2rem"},resultcard:{marginTop:"2rem"}}},{name:"Page"}),Object(Q.b)(function(e){return{progress:e.changeProgress.progress}}))(Ne));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Q.a,{store:pe},r.a.createElement(Te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},87:function(e,t,a){e.exports=a.p+"static/media/logo.67310b77.png"},97:function(e,t,a){e.exports=a(221)}},[[97,1,2]]]);
//# sourceMappingURL=main.9228ec19.chunk.js.map